(function(i){var e={undHash:/_|-/,colons:/::/,words:/([A-Z]+)([A-Z][a-z])/g,lowUp:/([a-z\d])([A-Z])/g,dash:/([a-z\d])([A-Z])/g,replacer:/\{([^\}]+)\}/g,dot:/\./},l=function(a,b,c){return a[b]!==undefined?a[b]:c&&(a[b]={})},j=function(a){var b=typeof a;return a&&(b=="function"||b=="object")},m,k=i.String=i.extend(i.String||{},{getObject:m=function(a,b,c){a=a?a.split(e.dot):[];var f=a.length,d,h,g,n=0;b=i.isArray(b)?b:[b||window];if(f==0)return b[0];for(;d=b[n++];){for(g=0;g<f-1&&j(d);g++)d=l(d,a[g],
c);if(j(d)){h=l(d,a[g],c);if(h!==undefined){c===false&&delete d[a[g]];return h}}}},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substr(1)},camelize:function(a){a=k.classize(a);return a.charAt(0).toLowerCase()+a.substr(1)},classize:function(a,b){a=a.split(e.undHash);for(var c=0;c<a.length;c++)a[c]=k.capitalize(a[c]);return a.join(b||"")},niceName:function(a){return k.classize(a," ")},underscore:function(a){return a.replace(e.colons,"/").replace(e.words,"$1_$2").replace(e.lowUp,"$1_$2").replace(e.dash,
"_").toLowerCase()},sub:function(a,b,c){var f=[];c=typeof c=="boolean"?!c:c;f.push(a.replace(e.replacer,function(d,h){d=m(h,b,c);if(j(d)){f.push(d);return""}else return""+d}));return f.length<=1?f[0]:f},_regs:e})})(jQuery);
(function(i){var j=false,p=i.makeArray,q=i.isFunction,l=i.isArray,m=i.extend,s=i.String.getObject,n=function(a,c){return a.concat(p(c))},t=/xyz/.test(function(){})?/\b_super\b/:/.*/,r=function(a,c,d){d=d||a;for(var b in a)d[b]=q(a[b])&&q(c[b])&&t.test(a[b])?function(h,g){return function(){var f=this._super,e;this._super=c[h];e=g.apply(this,arguments);this._super=f;return e}}(b,a[b]):a[b]};clss=i.Class=function(){arguments.length&&clss.extend.apply(clss,arguments)};m(clss,{proxy:function(a){var c=
p(arguments),d;a=c.shift();l(a)||(a=[a]);d=this;return function(){for(var b=n(c,arguments),h,g=a.length,f=0,e;f<g;f++)if(e=a[f]){if((h=typeof e=="string")&&d._set_called)d.called=e;b=(h?d[e]:e).apply(d,b||[]);if(f<g-1)b=!l(b)||b._use_call?[b]:b}return b}},newInstance:function(){var a=this.rawInstance(),c;if(a.setup)c=a.setup.apply(a,arguments);if(a.init)a.init.apply(a,l(c)?c:arguments);return a},setup:function(a){this.defaults=m(true,{},a.defaults,this.defaults);return arguments},rawInstance:function(){j=
true;var a=new this;j=false;return a},extend:function(a,c,d){function b(){if(!j)return this.constructor!==b&&arguments.length?arguments.callee.extend.apply(arguments.callee,arguments):this.Class.newInstance.apply(this.Class,arguments)}if(typeof a!="string"){d=c;c=a;a=null}if(!d){d=c;c=null}d=d||{};var h=this,g=this.prototype,f,e,k,o;j=true;o=new this;j=false;r(d,g,o);for(f in this)if(this.hasOwnProperty(f))b[f]=this[f];r(c,this,b);if(a){k=a.split(/\./);e=k.pop();k=g=s(k.join("."),window,true);g[e]=
b}m(b,{prototype:o,namespace:k,shortName:e,constructor:b,fullName:a});b.prototype.Class=b.prototype.constructor=b;e=b.setup.apply(b,n([h],arguments));if(b.init)b.init.apply(b,e||n([h],arguments));return b}});clss.callback=clss.prototype.callback=clss.prototype.proxy=clss.proxy})(jQuery);

(function(a){var e=jQuery.cleanData;a.cleanData=function(b){for(var c=0,d;(d=b[c])!==undefined;c++)a(d).triggerHandler("destroyed");e(b)}})(jQuery);
(function(e){var v=function(a,b,c){var d,f=a.bind&&a.unbind?a:e(j(a)?[a]:a);if(b.indexOf(">")===0){b=b.substr(1);d=function(i){i.target===a&&c.apply(this,arguments)}}f.bind(b,d||c);return function(){f.unbind(b,d||c);a=b=c=d=null}},k=e.makeArray,w=e.isArray,j=e.isFunction,l=e.extend,q=e.String,r=e.each,x=Array.prototype.slice,y=function(a,b,c,d){var f=a.delegate&&a.undelegate?a:e(j(a)?[a]:a);f.delegate(b,c,d);return function(){f.undelegate(b,c,d);f=a=c=d=b=null}},s=function(a,b,c,d){return d?y(a,d,
b,c):v(a,b,c)},m=function(a,b){var c=typeof b=="string"?a[b]:b;return function(){a.called=b;return c.apply(a,[this.nodeName?e(this):this].concat(x.call(arguments,0)))}},z=/\./g,A=/_?controllers?/ig,t=function(a){return q.underscore(a.replace("jQuery.","").replace(z,"_").replace(A,""))},B=/[^\w]/,u=/\{([^\}]+)\}/g,C=/^(?:(.*?)\s)?([\w\.\:>]+)$/,n,o=function(a,b){return e.data(a,"controllers",b)};e.Class("jQuery.Controller",{setup:function(){this._super.apply(this,arguments);if(!(!this.shortName||this.fullName==
"jQuery.Controller")){this._fullName=t(this.fullName);this._shortName=t(this.shortName);var a=this,b=this.pluginName||this._fullName,c;e.fn[b]||(e.fn[b]=function(d){var f=k(arguments),i=typeof d=="string"&&j(a.prototype[d]),D=f[0];return this.each(function(){var g=o(this);if(g=g&&g[b])i?g[D].apply(g,f.slice(1)):g.update.apply(g,f);else a.newInstance.apply(a,[this].concat(f))})});this.actions={};for(c in this.prototype)if(!(c=="constructor"||!j(this.prototype[c])))if(this._isAction(c))this.actions[c]=
this._action(c)}},hookup:function(a){return new this(a)},_isAction:function(a){return B.test(a)?true:e.inArray(a,this.listensTo)>-1||e.event.special[a]||p[a]},_action:function(a,b){u.lastIndex=0;if(!b&&u.test(a))return null;a=b?q.sub(a,[b,window]):a;b=w(a);var c=(b?a[1]:a).match(C);return{processor:p[c[2]]||n,parts:c,delegate:b?a[0]:undefined}},processors:{},listensTo:[],defaults:{}},{setup:function(a,b){var c=this.constructor;a=(typeof a=="string"?e(a):a.jquery?a:[a])[0];var d=c.pluginName||c._fullName;
this.element=e(a).addClass(d);(o(a)||o(a,{}))[d]=this;this.options=l(l(true,{},c.defaults),b);this.called="init";this.bind();return[this.element,this.options].concat(k(arguments).slice(2))},bind:function(a,b,c){if(a===undefined){this._bindings=[];a=this.constructor;b=this._bindings;c=a.actions;var d=this.element;for(funcName in c)if(c.hasOwnProperty(funcName)){ready=c[funcName]||a._action(funcName,this.options);b.push(ready.processor(ready.delegate||d,ready.parts[2],ready.parts[1],funcName,this))}var f=
m(this,"destroy");d.bind("destroyed",f);b.push(function(i){e(i).unbind("destroyed",f)});return b.length}if(typeof a=="string"){c=b;b=a;a=this.element}return this._binder(a,b,c)},_binder:function(a,b,c,d){if(typeof c=="string")c=m(this,c);this._bindings.push(s(a,b,c,d));return this._bindings.length},_unbind:function(){var a=this.element[0];r(this._bindings,function(b,c){c(a)});this._bindings=[]},delegate:function(a,b,c,d){if(typeof a=="string"){d=c;c=b;b=a;a=this.element}return this._binder(a,c,d,
b)},update:function(a){l(this.options,a);this._unbind();this.bind()},destroy:function(){if(this._destroyed)throw this.constructor.shortName+" controller already deleted";var a=this.constructor.pluginName||this.constructor._fullName;this._destroyed=true;this.element.removeClass(a);this._unbind();delete this._actions;delete this.element.data("controllers")[a];e(this).triggerHandler("destroyed");this.element=null},find:function(a){return this.element.find(a)},_set_called:true});var p=e.Controller.processors;
n=function(a,b,c,d,f){return s(a,b,m(f,d),c)};r("change click contextmenu dblclick keydown keyup keypress mousedown mousemove mouseout mouseover mouseup reset resize scroll select submit focusin focusout mouseenter mouseleave".split(" "),function(a,b){p[b]=n});var h,E=function(a,b){for(h=0;h<b.length;h++)if(typeof b[h]=="string"?a.constructor._shortName==b[h]:a instanceof b[h])return true;return false};e.fn.extend({controllers:function(){var a=k(arguments),b=[],c,d,f;this.each(function(){c=e.data(this,
"controllers");for(f in c)if(c.hasOwnProperty(f)){d=c[f];if(!a.length||E(d,a))b.push(d)}});return b},controller:function(){return this.controllers.apply(this,arguments)[0]}})})(jQuery);
(function(){var n=$.String,x=n.getObject,r=n.underscore,C=n.classize,w=$.isArray,y=$.makeArray,s=$.extend,j=$.each,l=function(a,b,c){$.event.trigger(b,c,a,true)},m=function(a,b,c,d,f,e,g){if(typeof a=="string"){var h=a.indexOf(" ");a=h>-1?{url:a.substr(h+1),type:a.substr(0,h)}:{url:a}}a.data=typeof b=="object"&&!w(b)?s(a.data||{},b):b;a.url=n.sub(a.url,a.data,true);return $.ajax(s({type:e||"post",dataType:g||"json",fixture:f,success:c,error:d},a))},o=function(a,b,c){var d=r(a.shortName),f="-"+d+(b||
"");return $.fixture&&$.fixture[f]?f:c||"//"+r(a.fullName).replace(/\.models\..*/,"").replace(/\./g,"/")+"/fixtures/"+d+(b||"")+".json"},D=function(a,b,c){b=b||{};a=a.id;if(b[a]&&b[a]!==c){b["new"+n.capitalize(c)]=b[a];delete b[a]}b[a]=c;return b},z=function(a){return new (a||$.Model.List||Array)},t=function(a){return a[a.constructor.id]},E=function(a){var b=[];j(a,function(c,d){if(!d["__u Nique"]){b.push(d);d["__u Nique"]=1}});return j(b,function(c,d){delete d["__u Nique"]})},A=function(a,b,c,d,
f){var e=$.Deferred(),g=[a.serialize(),function(k){a[f||b+"d"](k);e.resolveWith(a,[a,k,b])},function(k){e.rejectWith(a,[k])}],h=a.constructor,i,p=e.promise();b=="destroy"&&g.shift();b!=="create"&&g.unshift(t(a));e.then(c);e.fail(d);if((i=h[b].apply(h,g))&&i.abort)p.abort=function(){i.abort()};return p},u=function(a){return typeof a==="object"&&a!==null&&a},q=function(a){return function(){return $.fn[a].apply($([this]),arguments)}},B=q("bind");q=q("unbind");ajaxMethods={create:function(a){return function(b,
c,d){return m(a||this._shortName,b,c,d,o(this,"Create","-restCreate"))}},update:function(a){return function(b,c,d,f){return m(a||this._shortName+"/{"+this.id+"}",D(this,c,b),d,f,o(this,"Update","-restUpdate"),"put")}},destroy:function(a){return function(b,c,d){var f={};f[this.id]=b;return m(a||this._shortName+"/{"+this.id+"}",f,c,d,o(this,"Destroy","-restDestroy"),"delete")}},findAll:function(a){return function(b,c,d){return m(a||this._shortName,b,c,d,o(this,"s"),"get","json "+this._shortName+".models")}},
findOne:function(a){return function(b,c,d){return m(a||this._shortName+"/{"+this.id+"}",b,c,d,o(this),"get","json "+this._shortName+".model")}}};jQuery.Class("jQuery.Model",{setup:function(a){var b=this,c=this.fullName;j(["attributes","validations"],function(f,e){if(!b[e]||a[e]===b[e])b[e]={}});j(["convert","serialize"],function(f,e){if(a[e]!=b[e])b[e]=s({},a[e],b[e])});this._fullName=r(c.replace(/\./g,"_"));this._shortName=r(this.shortName);if(c.indexOf("jQuery")!=0){if(this.listType)this.list=new this.listType([]);
j(ajaxMethods,function(f,e){var g=b[f];if(typeof g!=="function")b[f]=e(g)});c={};var d="* "+this._shortName+".model";c[d+"s"]=this.proxy("models");c[d]=this.proxy("model");$.ajaxSetup({converters:c})}},attributes:{},model:function(a){if(!a)return null;if(a instanceof this)a=a.serialize();return new this(u(a[this._shortName])||u(a.data)||u(a.attributes)||a)},models:function(a){if(!a)return null;var b=z(this.List),c=w(a),d=$.Model.List;d=d&&a instanceof d;for(var f=(d=c?a:d?a.serialize():a.data)?d.length:
null,e=0;e<f;e++)b.push(this.model(d[e]));c||j(a,function(g,h){if(g!=="data")b[g]=h});return b},id:"id",addAttr:function(a,b){var c=this.attributes;c[a]||(c[a]=b);return b},convert:{date:function(a){var b=typeof a;return b==="string"?isNaN(Date.parse(a))?null:Date.parse(a):b==="number"?new Date(a):a},number:function(a){return parseFloat(a)},"boolean":function(a){return Boolean(a==="false"?0:a)},"default":function(a,b,c){b=x(c);var d=window;if(c.indexOf(".")>=0){c=c.substring(0,c.lastIndexOf("."));
d=x(c)}return typeof b=="function"?b.call(d,a):a}},serialize:{"default":function(a){return u(a)&&a.serialize?a.serialize():a},date:function(a){return a&&a.getTime()}},bind:B,unbind:q,_ajax:m},{setup:function(a){this._init=true;this.attrs(s({},this.constructor.defaults,a));delete this._init},update:function(a,b,c){this.attrs(a);return this.save(b,c)},errors:function(a){if(a)a=w(a)?a:y(arguments);var b={},c=this,d=function(e,g){j(g,function(h,i){if(h=i.call(c)){b[e]||(b[e]=[]);b[e].push(h)}})},f=this.constructor.validations;
j(a||f||{},function(e,g){if(typeof e=="number"){e=g;g=f[e]}d(e,g||[])});return $.isEmptyObject(b)?null:b},attr:function(a,b,c,d){var f=C(a),e="get"+f;if(b!==undefined){f="set"+f;e=this[a];var g=this,h=function(i){d&&d.call(g,i);l(g,"error."+a,i)};if(this[f]&&(b=this[f](b,this.proxy("_updateProperty",a,b,e,c,h),h))===undefined)return;this._updateProperty(a,b,e,c,h);return this}return this[e]?this[e]():this[a]},bind:B,unbind:q,_updateProperty:function(a,b,c,d,f){var e=this.constructor,g=e.attributes[a]||
e.addAttr(a,"string"),h=e.convert[g]||e.convert["default"],i=null,p="",k="updated.";d=d;var v=e.list;b=this[a]=b===null?null:h.call(e,b,function(){},g);this._init||(i=this.errors(a));g=[b];h=[a,b,c];if(i){p=k="error.";d=f;h.splice(1,0,i);g.unshift(i)}if(c!==b&&!this._init){!i&&l(this,p+a,g);l(this,k+"attr",h)}d&&d.apply(this,g);if(a===e.id&&b!==null&&v)if(c){if(c!=b){v.remove(c);v.push(this)}}else v.push(this)},removeAttr:function(a){var b=this[a],c=false,d=this.constructor.attributes;this[a]&&delete this[a];
if(d[a]){delete d[a];c=true}!this._init&&c&&b&&l(this,"updated.attr",[a,null,b])},attrs:function(a){var b,c=this.constructor,d=c.attributes;if(a){c=c.id;for(b in a)b!=c&&this.attr(b,a[b]);c in a&&this.attr(c,a[c])}else{a={};for(b in d)if(d.hasOwnProperty(b))a[b]=this.attr(b)}return a},serialize:function(){var a=this.constructor,b=a.attributes,c,d,f={},e;attributes={};for(e in b)if(b.hasOwnProperty(e)){c=b[e];d=a.serialize[c]||a.serialize["default"];f[e]=d.call(a,this[e],c)}return f},isNew:function(){var a=
t(this);return a===undefined||a===null||a===""},save:function(a,b){return A(this,this.isNew()?"create":"update",a,b)},destroy:function(a,b){return A(this,"destroy",a,b,"destroyed")},identity:function(){var a=t(this),b=this.constructor;return(b._fullName+"_"+(b.escapeIdentity?encodeURIComponent(a):a)).replace(/ /g,"_")},elements:function(a){var b=this.identity();if(this.constructor.escapeIdentity)b=b.replace(/([ #;&,.+*~\'%:"!^$[\]()=>|\/])/g,"\\$1");return $("."+b,a)},hookup:function(a){var b=this.constructor._shortName,
c=$.data(a,"models")||$.data(a,"models",{});$(a).addClass(b+" "+this.identity());c[b]=this}});j(["created","updated","destroyed"],function(a,b){$.Model.prototype[b]=function(c){var d=this.constructor;b==="destroyed"&&d.list&&d.list.remove(t(this));c&&typeof c=="object"&&this.attrs(c.attrs?c.attrs():c);l(this,b);l(d,b,this);return[this].concat(y(arguments))}});$.fn.models=function(){var a=[],b,c;this.each(function(){j($.data(this,"models")||{},function(d,f){b=b===undefined?f.constructor.List||null:
f.constructor.List===b?b:null;a.push(f)})});c=z(b);c.push.apply(c,E(a));return c};$.fn.model=function(a){if(a&&a instanceof $.Model){a.hookup(this[0]);return this}else return this.models.apply(this,arguments)[0]}})(jQuery);
(function(d){var l=function(a){return a[0]&&d.isArray(a[0])?a[0]:a[0]instanceof d.Model.List?d.makeArray(a[0]):d.makeArray(a)},q=0,m=function(a){return a[a.constructor.id]},j=jQuery.expando,k=d.each,n=d.Model._ajax,o={update:function(a){return function(b,c,e,g){return n(a,{ids:b,attrs:c},e,g,"-updateAll","put")}},destroy:function(a){return function(b,c,e){return n(a,b,c,e,"-destroyAll","post")}}};d.Class("jQuery.Model.List",{setup:function(){for(var a in o)if(typeof this[a]!=="function")this[a]=o[a](this[a])}},
{init:function(a){this.length=0;this._data={};this._namespace=".list"+ ++q;this.push.apply(this,d.makeArray(a||[]))},slice:function(){return new this.Class(Array.prototype.slice.apply(this,arguments))},match:function(a,b){return this.grep(function(c){return c[a]==b})},grep:function(a,b){return new this.Class(d.grep(this,a,b))},_makeData:function(){var a=this._data={};this.each(function(b,c){a[c[c.constructor.id]]=c})},get:function(){if(!this.length)return new this.Class([]);this._changed&&this._makeData();
var a=[],b=this[0].constructor,c=b.id;b=new RegExp(b._fullName+"_([^ ]+)");for(var e,g,f=l(arguments),h=0;h<f.length;h++)(g=f[h].nodeName&&(e=f[h].className.match(b))?this._data[e[1]]:this._data[typeof f[h]=="string"||typeof f[h]=="number"?f[h]:f[h][c]])&&a.push(g);return new this.Class(a)},remove:function(a){if(!this.length)return[];var b=[],c=this[0].constructor,e=c.id;c=new RegExp(c._fullName+"_([^ ]+)");var g;a=l(arguments);for(var f=0;f<this.length;){for(var h=this[f],p=false,i=0;i<a.length;i++){var r=
a[i].nodeName&&(g=a[i].className.match(c))&&g[1]||(typeof a[i]=="string"||typeof a[i]=="number"?a[i]:a[i][e]);if(h[e]==r){b.push.apply(b,this.splice(f,1));a.splice(i,1);p=true;break}}p||f++}b=new this.Class(b);b.length&&d([this]).trigger("remove",[b]);return b},elements:function(a){return d(this.map(function(b){return"."+b.identity()}).join(","),a)},model:function(){return this.constructor.namespace},findAll:function(a,b,c){var e=this;this.model().findAll(a,function(g){e.push(g);b&&b(e)},c)},destroy:function(a,
b){var c=this.map(m),e=this.slice(0,this.length);if(c.length)this.constructor.destroy(c,function(){k(e,function(){this.destroyed()});a&&a(e)},b);else a&&a(this);return this},update:function(a,b,c){var e=this.map(m),g=this.slice(0,this.length);if(e.length)this.constructor.update(e,a,function(f){var h=d.extend(a,f||{});k(g,function(){this.updated(h)});b&&b(g)},c);else b&&b(this);return this},bind:function(){this[j]===undefined&&this.bindings(this);d.fn.bind.apply(d([this]),arguments);return this},unbind:function(){d.fn.unbind.apply(d([this]),
arguments);this[j]===undefined&&d(this).unbind(this._namespace);return this},bindings:function(a){var b=this;d(a).bind("destroyed"+this._namespace,function(){b.remove(this)}).bind("updated"+this._namespace,function(){d([b]).trigger("updated",this)})},push:function(){var a=l(arguments);this[j]!==undefined&&this.bindings(a);this._changed=true;var b=s.apply(this,a);this[j]&&a.length&&d([this]).trigger("add",[a]);return b},serialize:function(){return this.map(function(a){return a.serialize()})}});var s=
[].push;k({pop:[].pop,shift:[].shift,unshift:[].unshift,splice:[].splice,sort:[].sort,reverse:[].reverse},function(a,b){d.Model.List.prototype[a]=function(){this._changed=true;return b.apply(this,arguments)}});k(["each","map"],function(a,b){d.Model.List.prototype[b]=function(c,e){return d[b](this,c,e)}})})(jQuery);
(function(a){function h(d){d=d||window[e][i];return d.replace(/^[^#]*#?(.*)$/,"$1")}var k,o=a.event.special,e="location",i="href",p=document.documentMode,q=a.browser.msie&&(p===undefined||p<8),r="onhashchange"in window&&!q;a.hashchangeDelay=100;o.hashchange=a.extend(o.hashchange,{setup:function(){if(r)return false;a(k.start)},teardown:function(){if(r)return false;a(k.stop)}});k=function(){function d(){f=l=function(b){return b};if(q){j=a('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow;
l=function(){return h(j.document[e][i])};f=function(b,c){if(b!==c){c=j.document;c.open().close();c[e].hash="#"+b}};f(h())}}var m={},g,j,f,l;m.start=function(){if(!g){var b=h();f||d();navigator.userAgent.match(/Rhino/)||function c(){var s=h(),n=l(b);if(s!==b){f(b=s,n);a(window).trigger("hashchange")}else if(n!==b)window[e][i]=window[e][i].replace(/#.*/,"")+"#"+n;g=setTimeout(c,a.hashchangeDelay)}()}};m.stop=function(){if(!j){g&&clearTimeout(g);g=0}};return m}()})(jQuery);
(function(f){f.fn.triggerAsync=function(a,b,d,e){if(typeof b=="function"){d=b;b=undefined}if(this[0]){var c=f.Event(a),i=c.preventDefault;c.preventDefault=function(){i.apply(this,arguments);e&&e(this)};jQuery.event.trigger({type:a,_success:d},b,this[0])}else d.call(this);return this};var j={},k=/\.(.*)$/,g=f.event;g.special["default"]={add:function(a){j[a.namespace.replace(k,"")]=true},setup:function(){return true}};var h=g.trigger;g.trigger=function(a,b,d,e){var c=a.type||a;a=typeof a==="object"?
a[jQuery.expando]?a:new jQuery.Event(c,a):new jQuery.Event(c);c=h.call(f.event,a,b,d,e);if(!e&&!a.isDefaultPrevented()&&a.type.indexOf("default")!==0){h("default."+a.type,b,d);a._success&&a._success(a)}if(a.isPaused&&a.isPaused()){a.isDefaultPrevented=a.pausedState.isDefaultPrevented;a.isPropagationStopped=a.pausedState.isPropagationStopped}return c}})(jQuery);
(function(c){var f=function(a){return a!==undefined?(this.array[0]=a):this.array[0]},g=function(a){return a!==undefined?(this.array[1]=a):this.array[1]};c.Vector=function(){this.update(c.makeArray(arguments))};c.Vector.prototype={app:function(a){var b,d=[];for(b=0;b<this.array.length;b++)d.push(a(this.array[b]));return(new c.Vector).update(d)},plus:function(){var a,b=arguments[0]instanceof c.Vector?arguments[0].array:c.makeArray(arguments),d=this.array.slice(0),e=new c.Vector;for(a=0;a<b.length;a++)d[a]=
(d[a]?d[a]:0)+b[a];return e.update(d)},minus:function(){var a,b=arguments[0]instanceof c.Vector?arguments[0].array:c.makeArray(arguments),d=this.array.slice(0),e=new c.Vector;for(a=0;a<b.length;a++)d[a]=(d[a]?d[a]:0)-b[a];return e.update(d)},equals:function(){var a,b=arguments[0]instanceof c.Vector?arguments[0].array:c.makeArray(arguments),d=this.array.slice(0),e=new c.Vector;for(a=0;a<b.length;a++)if(d[a]!=b[a])return null;return e.update(d)},x:f,left:f,width:f,y:g,top:g,height:g,toString:function(){return"("+
this.array[0]+","+this.array[1]+")"},update:function(a){var b;if(this.array)for(b=0;b<this.array.length;b++)delete this.array[b];this.array=a;for(b=0;b<a.length;b++)this[b]=this.array[b];return this}};c.Event.prototype.vector=function(){if(this.originalEvent.synthetic){var a=document.documentElement,b=document.body;return new c.Vector(this.clientX+(a&&a.scrollLeft||b&&b.scrollLeft||0)-(a.clientLeft||0),this.clientY+(a&&a.scrollTop||b&&b.scrollTop||0)-(a.clientTop||0))}else return new c.Vector(this.pageX,
this.pageY)};c.fn.offsetv=function(){if(this[0]==window)return new c.Vector(window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft,window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop);else{var a=this.offset();return new c.Vector(a.left,a.top)}};c.fn.dimensionsv=function(a){return this[0]==window||!a?new c.Vector(this.width(),this.height()):new c.Vector(this[a+"Width"](),this[a+"Height"]())}})(jQuery);
(function(){var g=jQuery.event,m=function(a,e,d,h){var f,b,c,k,j,i,l,n;for(f=0;f<e.length;f++){b=e[f];k=b.indexOf(".")<0;if(!k){c=b.split(".");b=c.shift();l=new RegExp("(^|\\.)"+c.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)")}c=(a[b]||[]).slice(0);for(j=0;j<c.length;j++){i=c[j];if(n=k||l.test(i.namespace))if(h){if(i.selector===h)d(b,i.origHandler||i.handler)}else if(h===null)d(b,i.origHandler||i.handler,i.selector);else i.selector||d(b,i.origHandler||i.handler)}}};g.find=function(a,e,d){a=($._data(a)||
{}).events;var h=[];if(!a)return h;m(a,e,function(f,b){h.push(b)},d);return h};g.findBySelector=function(a,e){a=$._data(a).events;var d={},h=function(f,b,c){f=d[f]||(d[f]={});(f[b]||(f[b]=[])).push(c)};if(!a)return d;m(a,e,function(f,b,c){h(c||"",f,b)},null);return d};g.supportTouch="ontouchend"in document;$.fn.respondsTo=function(a){return this.length?g.find(this[0],$.isArray(a)?a:[a]).length>0:false};$.fn.triggerHandled=function(a,e){a=typeof a=="string"?$.Event(a):a;this.trigger(a,e);return a.handled};
g.setupHelper=function(a,e,d){if(!d){d=e;e=null}var h=function(b){var c=b.selector||"";if(c){b=g.find(this,a,c);b.length||$(this).delegate(c,e,d)}else g.find(this,a,c).length||g.add(this,e,d,{selector:c,delegate:this})},f=function(b){var c=b.selector||"";if(c){b=g.find(this,a,c);b.length||$(this).undelegate(c,e,d)}else g.find(this,a,c).length||g.remove(this,e,d,{selector:c,delegate:this})};$.each(a,function(){g.special[this]={add:h,remove:f,setup:function(){},teardown:function(){}}})}})(jQuery);
(function(c){var h=function(a,b){var d=Array.prototype.slice.call(arguments,2);return function(){var e=[this].concat(d,c.makeArray(arguments));return b.apply(a,e)}},g=c.event,i=window.getSelection?function(){window.getSelection().removeAllRanges()}:function(){};c.Drag=function(){};c.extend(c.Drag,{lowerName:"drag",current:null,distance:0,mousedown:function(a,b){if(!(!(a.button===0||a.button==1)||this.current)){var d=new c.Drag,e=a.delegateTarget||b,f=a.handleObj.selector,j=this;this.current=d;d.setup({element:b,
delegate:a.delegateTarget||b,selector:a.handleObj.selector,moved:false,_distance:this.distance,callbacks:{dragdown:g.find(e,["dragdown"],f),draginit:g.find(e,["draginit"],f),dragover:g.find(e,["dragover"],f),dragmove:g.find(e,["dragmove"],f),dragout:g.find(e,["dragout"],f),dragend:g.find(e,["dragend"],f)},destroyed:function(){j.current=null}},a)}}});c.extend(c.Drag.prototype,{setup:function(a,b){c.extend(this,a);this.element=c(this.element);this.event=b;this.allowOtherDrags=this.moved=false;var d=
h(this,this.mousemove),e=h(this,this.mouseup);this._mousemove=d;this._mouseup=e;this._distance=a.distance?a.distance:0;this.mouseStartPosition=b.vector();c(document).bind("mousemove",d);c(document).bind("mouseup",e);if(!this.callEvents("down",this.element,b)){this.noSelection(this.delegate);i()}},destroy:function(){c(document).unbind("mousemove",this._mousemove);c(document).unbind("mouseup",this._mouseup);if(!this.moved)this.event=this.element=null;this.selection(this.delegate);this.destroyed()},
mousemove:function(a,b){if(!this.moved){if(Math.sqrt(Math.pow(b.pageX-this.event.pageX,2)+Math.pow(b.pageY-this.event.pageY,2))<this._distance)return false;this.init(this.element,b);this.moved=true}a=b.vector();this._start_position&&this._start_position.equals(a)||this.draw(a,b)},mouseup:function(a,b){this.moved&&this.end(b);this.destroy()},noSelection:function(a){a=a||this.delegate;document.documentElement.onselectstart=function(){return false};document.documentElement.unselectable="on";this.selectionDisabled=
this.selectionDisabled?this.selectionDisabled.add(a):c(a);this.selectionDisabled.css("-moz-user-select","-moz-none")},selection:function(){if(this.selectionDisabled){document.documentElement.onselectstart=function(){};document.documentElement.unselectable="off";this.selectionDisabled.css("-moz-user-select","")}},init:function(a,b){a=c(a);var d=this.movingElement=this.element=c(a);this._cancelled=false;this.event=b;this.mouseElementPosition=this.mouseStartPosition.minus(this.element.offsetv());this.callEvents("init",
a,b);if(this._cancelled!==true){this.startPosition=d!=this.movingElement?this.movingElement.offsetv():this.currentDelta();this.makePositioned(this.movingElement);this.oldZIndex=this.movingElement.css("zIndex");this.movingElement.css("zIndex",1E3);!this._only&&this.constructor.responder&&this.constructor.responder.compile(b,this)}},makePositioned:function(a){var b;b=a.css("position");if(!b||b=="static"){b={position:"relative"};if(window.opera){b.top="0px";b.left="0px"}a.css(b)}},callEvents:function(a,
b,d,e){var f=this.callbacks[this.constructor.lowerName+a];for(a=0;a<f.length;a++)f[a].call(b,d,this,e);return f.length},currentDelta:function(){return new c.Vector(parseInt(this.movingElement.css("left"),10)||0,parseInt(this.movingElement.css("top"),10)||0)},draw:function(a,b){if(!this._cancelled){i();this.location=a.minus(this.mouseElementPosition);this.move(b);if(!this._cancelled){b.isDefaultPrevented()||this.position(this.location);!this._only&&this.constructor.responder&&this.constructor.responder.show(a,
this,b)}}},position:function(a){var b=this.currentDelta();b=this.movingElement.offsetv().minus(b);this.required_css_position=a.minus(b);this.offsetv=a;a=this.movingElement[0].style;if(!this._cancelled&&!this._horizontal)a.top=this.required_css_position.top()+"px";if(!this._cancelled&&!this._vertical)a.left=this.required_css_position.left()+"px"},move:function(a){this.callEvents("move",this.element,a)},over:function(a,b){this.callEvents("over",this.element,a,b)},out:function(a,b){this.callEvents("out",
this.element,a,b)},end:function(a){if(!this._cancelled){!this._only&&this.constructor.responder&&this.constructor.responder.end(a,this);this.callEvents("end",this.element,a);if(this._revert){var b=this;this.movingElement.animate({top:this.startPosition.top()+"px",left:this.startPosition.left()+"px"},function(){b.cleanup.apply(b,arguments)})}else this.cleanup();this.event=null}},cleanup:function(){this.movingElement.css({zIndex:this.oldZIndex});this.movingElement[0]!==this.element[0]&&!this.movingElement.has(this.element[0]).length&&
!this.element.has(this.movingElement[0]).length&&this.movingElement.css({display:"none"});this._removeMovingElement&&this.movingElement.remove();this.movingElement=this.element=this.event=null},cancel:function(){this._cancelled=true;!this._only&&this.constructor.responder&&this.constructor.responder.clear(this.event.vector(),this,this.event);this.destroy()},ghost:function(a){var b=this.movingElement.clone().css("position","absolute");(a?c(a):this.movingElement).after(b);b.width(this.movingElement.width()).height(this.movingElement.height());
b.offset(this.movingElement.offset());this.movingElement=b;this.noSelection(b);this._removeMovingElement=true;return b},representative:function(a,b,d){this._offsetX=b||0;this._offsetY=d||0;b=this.mouseStartPosition;this.movingElement=c(a);this.movingElement.css({top:b.y()-this._offsetY+"px",left:b.x()-this._offsetX+"px",display:"block",position:"absolute"}).show();this.noSelection(this.movingElement);this.mouseElementPosition=new c.Vector(this._offsetX,this._offsetY)},revert:function(a){this._revert=
a===undefined?true:a;return this},vertical:function(){this._vertical=true;return this},horizontal:function(){return this._horizontal=true},only:function(a){return this._only=a===undefined?true:a},distance:function(a){if(a!==undefined){this._distance=a;return this}else return this._distance}});g.setupHelper(["dragdown","draginit","dragover","dragmove","dragout","dragend"],"mousedown",function(a){c.Drag.mousedown.call(c.Drag,a,this)})})(jQuery);

(function(i){var j=function(b,c,e,d,a,g){return c>=d&&c<d+g&&b>=e&&b<e+a};i.fn.within=function(b,c,e){var d=[];this.each(function(){var a=jQuery(this);if(this==document.documentElement)return d.push(this);a=e?jQuery.data(this,"offsetCache")||jQuery.data(this,"offsetCache",a.offset()):a.offset();j(b,c,a.left,a.top,this.offsetWidth,this.offsetHeight)&&d.push(this)});return this.pushStack(jQuery.unique(d),"within",b+","+c)};i.fn.withinBox=function(b,c,e,d,a){var g=[];this.each(function(){var f=jQuery(this);
if(this==document.documentElement)return this.ret.push(this);var h=a?jQuery.data(this,"offset")||jQuery.data(this,"offset",f.offset()):f.offset(),k=f.width();f=f.height();(res=!(h.top>c+d||h.top+f<c||h.left>b+e||h.left+k<b))&&g.push(this)});return this.pushStack(jQuery.unique(g),"withinBox",jQuery.makeArray(arguments).join(","))}})(jQuery);
(function(){jQuery.fn.compare=function(a){try{a=a.jquery?a[0]:a}catch(e){return null}if(window.HTMLElement){var b=HTMLElement.prototype.toString.call(a);if(b=="[xpconnect wrapped native prototype]"||b=="[object XULElement]"||b==="[object Window]")return null}if(this[0].compareDocumentPosition)return this[0].compareDocumentPosition(a);if(this[0]==document&&a!=document)return 8;b=(this[0]!==a&&this[0].contains(a)&&16)+(this[0]!=a&&a.contains(this[0])&&8);var c=document.documentElement;if(this[0].sourceIndex){b+=
this[0].sourceIndex<a.sourceIndex&&4;b+=this[0].sourceIndex>a.sourceIndex&&2;b+=(this[0].ownerDocument!==a.ownerDocument||this[0]!=c&&this[0].sourceIndex<=0||a!=c&&a.sourceIndex<=0)&&1}else{c=document.createRange();var d=document.createRange();c.selectNode(this[0]);d.selectNode(a);c.compareBoundaryPoints(Range.START_TO_START,d)}return b}})(jQuery);
(function(f){var m=f.event,k=["dropover","dropon","dropout","dropinit","dropmove","dropend"];f.Drop=function(a,b){jQuery.extend(this,a);this.element=f(b)};f.each(k,function(){m.special[this]={add:function(){var a=f(this),b=a.data("dropEventCount")||0;a.data("dropEventCount",b+1);b==0&&f.Drop.addElement(this)},remove:function(){var a=f(this),b=a.data("dropEventCount")||0;a.data("dropEventCount",b-1);b<=1&&f.Drop.removeElement(this)}}});f.extend(f.Drop,{lowerName:"drop",_rootElements:[],_elements:f(),
last_active:[],endName:"dropon",addElement:function(a){for(var b=0;b<this._rootElements.length;b++)if(a==this._rootElements[b])return;this._rootElements.push(a)},removeElement:function(a){for(var b=0;b<this._rootElements.length;b++)if(a==this._rootElements[b]){this._rootElements.splice(b,1);return}},sortByDeepestChild:function(a,b){a=a.element.compare(b.element);if(a&16||a&4)return 1;if(a&8||a&2)return-1;return 0},isAffected:function(a,b,c){return c.element!=b.element&&c.element.within(a[0],a[1],
c._cache).length==1},deactivate:function(a,b,c){b.out(c,a);a.callHandlers(this.lowerName+"out",a.element[0],c,b)},activate:function(a,b,c){b.over(c,a);a.callHandlers(this.lowerName+"over",a.element[0],c,b)},move:function(a,b,c){a.callHandlers(this.lowerName+"move",a.element[0],c,b)},compile:function(a,b){if(this.dragging||b){if(!this.dragging){this.dragging=b;this.last_active=[]}for(var c,e,d,g=[],i=this.dragging,h=0;h<this._rootElements.length;h++){b=this._rootElements[h];c=f.event.findBySelector(b,
k);for(e in c){d=e?jQuery(e,b):[b];for(var j=0;j<d.length;j++)this.addCallbacks(d[j],c[e],i)&&g.push(d[j])}}this.add(g,a,i)}},addCallbacks:function(a,b,c){var e=f.data(a,"_dropData");if(e){if(!c){for(var d in b)e[d]=e[d]?e[d].concat(b[d]):b[d];return false}}else{f.data(a,"_dropData",new f.Drop(b,a));return true}},add:function(a,b,c){for(var e=0,d;e<a.length;){d=f.data(a[e],"_dropData");d.callHandlers(this.lowerName+"init",a[e],b,c);if(d._canceled)a.splice(e,1);else e++}this._elements.push.apply(this._elements,
a)},show:function(a,b,c){if(this._elements.length){var e=[],d=true,g=0,i,h,j,l=this.last_active;for(i=this;g<this._elements.length;)if(h=f.data(this._elements[g],"_dropData")){g++;i.isAffected(a,b,h)&&e.push(h)}else this._elements.splice(g,1);e.sort(this.sortByDeepestChild);c.stopRespondPropagate=function(){d=false};h=e.slice();this.last_active=e;for(a=0;a<l.length;a++){i=l[a];for(g=0;j=h[g];)if(i==j){h.splice(g,1);break}else g++;j||this.deactivate(i,b,c);if(!d)return}for(g=0;g<h.length;g++){this.activate(h[g],
b,c);if(!d)return}for(g=0;g<e.length;g++){this.move(e[g],b,c);if(!d)return}}},end:function(a,b){for(var c,e=this.lowerName+"end",d=0;d<this.last_active.length;d++){c=this.last_active[d];this.isAffected(a.vector(),b,c)&&c[this.endName]&&c.callHandlers(this.endName,null,a,b)}for(d=0;d<this._elements.length;d++)(c=f.data(this._elements[d],"_dropData"))&&c.callHandlers(e,null,a,b);this.clear()},clear:function(){this._elements.each(function(){f.removeData(this,"_dropData")});this._elements=f();delete this.dragging}});
f.Drag.responder=f.Drop;f.extend(f.Drop.prototype,{callHandlers:function(a,b,c,e){for(var d=this[a]?this[a].length:0,g=0;g<d;g++)this[a][g].call(b||this.element[0],c,this,e)},cache:function(a){this._cache=a!=null?a:true},cancel:function(){this._canceled=true}})})(jQuery);
(function(b){var c=b(),j=0,d=b(window),k=0,l=0,m;b(function(){k=d.width();l=d.height()});b.event.special.resize={setup:function(){if(this!==window){c.push(this);b.unique(c)}return this!==window},teardown:function(){c=c.not(this);return this!==window},add:function(h){h.origHandler=h.handler;h.handler=function(a,e){var f=this===window;if(f&&a.originalEvent){a=d.width();f=d.height();if(a!=k||f!=l){k=a;l=f;clearTimeout(m);m=setTimeout(function(){d.trigger("resize")},1)}}else if(j===0){j++;e=e===false?
a.target:this;b.event.handle.call(e,a);if(!a.isPropagationStopped()){for(var g=c.index(this),n=c.length,i,o;++g<n&&(i=c[g])&&(f||b.contains(e,i));){b.event.handle.call(i,a);if(a.isPropagationStopped())for(;++g<n&&(o=c[g]);)if(!b.contains(i,o)){g--;break}}a.stopImmediatePropagation()}j--}else h.origHandler.call(this,a,e)}}};b([document,window]).bind("resize",function(){})})(jQuery);
(function(h){var p=function(a){return a.replace(/^\/\//,"").replace(/[\/\.]/g,"_")},s=h.makeArray,B=1,e=h.View=function(a,b,c,d){if(typeof c==="function"){d=c;c=undefined}var f=C(b);if(f.length){var g=h.Deferred();f.push(t(a,true));h.when.apply(h,f).then(function(j){var k=s(arguments),l=k.pop()[0];if(n(b))b=u(j);else for(var m in b)if(n(b[m]))b[m]=u(k.shift());k=l(b,c);g.resolve(k);d&&d(k)});return g.promise()}else{var i;f=typeof d==="function";g=t(a,f);if(f){i=g;g.done(function(j){d(j(b,c))})}else g.done(function(j){i=
j(b,c)});return i}},v=function(a,b){if(!a.match(/[^\s]/))throw"$.View ERROR: There is no template or an empty template at "+b;},t=function(a,b){return h.ajax({url:a,dataType:"view",async:b})},n=function(a){return a&&h.isFunction(a.always)},C=function(a){var b=[];if(n(a))return[a];else for(var c in a)n(a[c])&&b.push(a[c]);return b},u=function(a){return h.isArray(a)&&a.length===3&&a[1]==="success"?a[0]:a};h.ajaxTransport("view",function(a,b){var c=b.url;a=c.match(/\.[\w\d]+$/);var d,f,g,i,j=function(l){l=
d.renderer(g,l);if(e.cache)e.cached[g]=l;return{view:l}};if(f=document.getElementById(c))a="."+f.type.match(/\/(x\-)?(.+)/)[2];if(!a){a=e.ext;c+=e.ext}g=p(c);if(c.match(/^\/\//)){var k=c.substr(2);c=typeof steal==="undefined"?(c="/"+k):steal.root.mapJoin(k)+""}d=e.types[a];return{send:function(l,m){if(e.cached[g])return m(200,"success",{view:e.cached[g]});else if(f)m(200,"success",j(f.innerHTML));else i=h.ajax({async:b.async,url:c,dataType:"text",error:function(){v("",c);m(404)},success:function(w){v(w,
c);m(200,"success",j(w))}})},abort:function(){i&&i.abort()}}});h.extend(e,{hookups:{},hookup:function(a){var b=++B;e.hookups[b]=a;return b},cached:{},cache:true,register:function(a){this.types["."+a.suffix]=a;window.steal&&steal.type(a.suffix+" view js",function(b,c){var d=e.types["."+b.type],f=p(b.rootSrc+"");b.text=d.script(f,b.text);c()})},types:{},ext:".ejs",registerScript:function(a,b,c){return"$.View.preload('"+b+"',"+e.types["."+a].script(b,c)+");"},preload:function(a,b){e.cached[a]=function(c,
d){return b.call(c,c,d)}}});window.steal&&steal.type("view js",function(a,b){var c=e.types["."+a.type],d=p(a.rootSrc+"");a.text="steal('"+(c.plugin||"jquery/view/"+a.type)+"').then(function($){$.View.preload('"+d+"',"+a.text+");\n})";b()});var x,o,y,z,q,A,r,D={val:true,text:true};x=function(a){var b=h.fn[a];h.fn[a]=function(){var c=s(arguments),d,f,g=this;if(n(c[0])){c[0].done(function(i){o.call(g,[i],b)});return this}else if(y(c)){if(d=A(c)){f=c[d];c[d]=function(i){o.call(g,[i],b);f.call(g,i)};e.apply(e,
c);return this}c=e.apply(e,c);if(n(c)){c.done(function(i){o.call(g,[i],b)});return this}else c=[c]}return D[a]?b.apply(this,c):o.call(this,c,b)}};o=function(a,b){var c;for(var d in e.hookups)break;if(d&&a[0]&&z(a[0])){c=e.hookups;e.hookups={};a[0]=h(a[0])}b=b.apply(this,a);c&&r(a[0],c);return b};y=function(a){var b=typeof a[1];return typeof a[0]=="string"&&(b=="object"||b=="function")&&!q(a[1])};q=function(a){return a.nodeType||a.jquery};z=function(a){if(q(a))return true;else if(typeof a==="string"){a=
h.trim(a);return a.substr(0,1)==="<"&&a.substr(a.length-1,1)===">"&&a.length>=3}else return false};A=function(a){return typeof a[3]==="function"?3:typeof a[2]==="function"&&2};r=function(a,b){var c,d=0,f,g;a=a.filter(function(){return this.nodeType!=3});a=a.add("[data-view-id]",a);for(c=a.length;d<c;d++)if(a[d].getAttribute&&(f=a[d].getAttribute("data-view-id"))&&(g=b[f])){g(a[d],f);delete b[f];a[d].removeAttribute("data-view-id")}h.extend(e.hookups,b)};h.fn.hookup=function(){var a=e.hookups;e.hookups=
{};r(this,a);return this};h.each(["prepend","append","after","before","text","html","replaceWith","val"],function(a,b){x(b)})})(jQuery);
(function(f){f.String.rsplit=function(a,e){for(var b=e.exec(a),c=[],d;b!==null;){d=b.index;if(d!==0){c.push(a.substring(0,d));a=a.slice(d)}c.push(b[0]);a=a.slice(b[0].length);b=e.exec(a)}a!==""&&c.push(a);return c}})(jQuery);
(function(i){var v=function(a){eval(a)},p=i.String.rsplit,k=i.extend,w=i.isArray,x=/\r\n/g,y=/\r/g,z=/\n/g,A=/\n/,B=/\\/g,q=/"/g,C=/'/g,D=/\t/g,E=/\{/g,F=/\}/g,r=/\s*\(([\$\w]+)\)\s*->([^\n]*)/,s=function(a){return a.replace(B,"\\\\").replace(z,"\\n").replace(q,'\\"').replace(D,"\\t")},G=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(q,"&#34;").replace(C,"&#39;")},m=i.View,n=function(a){var b=a.match(E);a=a.match(F);return(b?b.length:0)-(a?a.length:0)},
g=function(a){if(this.constructor!=g){var b=new g(a);return function(c,e){return b.render(c,e)}}if(typeof a=="function")this.template={fn:a};else{k(this,g.options,a);this.template=H(this.text,this.type,this.name)}};window.jQuery&&(jQuery.EJS=g);g.prototype.render=function(a,b){a=a||{};this._extra_helpers=b;b=new g.Helpers(a,b||{});return this.template.fn.call(a,a,b)};k(g,{text:function(a){if(typeof a=="string")return a;if(a===null||a===undefined)return"";var b=a.hookup&&function(c,e){a.hookup.call(a,
c,e)}||typeof a=="function"&&a||w(a)&&function(c,e){for(var d=0;d<a.length;d++)a[d].hookup?a[d].hookup(c,e):a[d](c,e)};if(b)return"data-view-id='"+m.hookup(b)+"'";return a.toString?a.toString():""},clean:function(a){return typeof a=="string"?G(a):typeof a=="number"?a:g.text(a)},options:{type:"<",ext:".ejs"}});var t=function(a,b,c){b=p(b,A);for(var e=0;e<b.length;e++)I(a,b[e],c)},I=function(a,b,c){a.lines++;b=p(b,a.splitter);for(var e,d=0;d<b.length;d++){e=b[d];e!==null&&c(e,a)}},J=function(a,b){var c=
{};k(c,{left:a+"%",right:"%"+b,dLeft:a+"%%",dRight:"%%"+b,eeLeft:a+"%==",eLeft:a+"%=",cmnt:a+"%#",scan:t,lines:0});c.splitter=new RegExp("("+[c.dLeft,c.dRight,c.eeLeft,c.eLeft,c.cmnt,c.left,c.right+"\n",c.right,"\n"].join(")|(").replace(/\[/g,"\\[").replace(/\]/g,"\\]")+")");return c},H=function(a,b,c){a=a.replace(x,"\n").replace(y,"\n");b=b||"<";var e=new g.Buffer(["var ___v1ew = [];"],[]),d="",u=function(h){e.push("___v1ew.push(",'"',s(h),'");')},l=null,o=function(){d=""},j=[];t(J(b,b==="["?"]":
">"),a||"",function(h,f){if(l===null)switch(h){case "\n":d+="\n";u(d);e.cr();o();break;case f.left:case f.eLeft:case f.eeLeft:case f.cmnt:l=h;d.length>0&&u(d);o();break;case f.dLeft:d+=f.left;break;default:d+=h;break}else switch(h){case f.right:switch(l){case f.left:h=n(d);f=j.length&&h==-1?j.pop():";";f==="));"&&e.push("return ___v1ew.join('')");e.push(d,f);h===1&&j.push(";");break;case f.eLeft:(h=n(d))&&j.push("));");if(r.test(d)){f=d.match(r);d="function(__){var "+f[1]+"=$(__);"+f[2]+"}"}e.push("___v1ew.push(",
"jQuery.EJS.clean(",d,h?"var ___v1ew = [];":"));");break;case f.eeLeft:(h=n(d))&&j.push("));");e.push("___v1ew.push(","jQuery.EJS.text(",d,h?"var ___v1ew = [];":"));");break}l=null;o();break;case f.dRight:d+=f.right;break;default:d+=h;break}});d.length>0&&e.push("___v1ew.push(",'"',s(d)+'");');a={out:"try { with(_VIEW) { with (_CONTEXT) {"+e.close()+" return ___v1ew.join('')}}}catch(e){e.lineNumber=null;throw e;}"};v.call(a,"this.fn = (function(_CONTEXT,_VIEW){"+a.out+"});\r\n//@ sourceURL="+c+".js");
return a};g.Buffer=function(a,b){this.line=[];this.script=[];this.post=b;this.push.apply(this,a)};g.Buffer.prototype={push:function(){this.line.push.apply(this.line,arguments)},cr:function(){this.script.push(this.line.join(""),"\n");this.line=[]},close:function(){if(this.line.length>0){this.script.push(this.line.join(""));this.line=[]}this.post.length&&this.push.apply(this,this.post);this.script.push(";");return this.script.join("")}};g.Helpers=function(a,b){this._data=a;this._extras=b;k(this,b)};
g.Helpers.prototype={plugin:function(){var a=i.makeArray(arguments),b=a.shift();return function(c){c=i(c);c[b].apply(c,a)}},view:function(a,b,c){c=c||this._extras;b=b||this._data;return m(a,b,c)}};m.register({suffix:"ejs",script:function(a,b){return"jQuery.EJS(function(_CONTEXT,_VIEW) { "+(new g({text:b,name:a})).template.out+" })"},renderer:function(a,b){return g({text:b,name:a})}})})(jQuery);
(function(g){var i=/radio|checkbox/i,j=/[^\[\]]+/g,k=/^[\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?$/,l=function(b){if(typeof b=="number")return true;if(typeof b!="string")return false;return b.match(k)};g.fn.extend({formParams:function(b,d){if(!!b===b){d=b;b=null}if(b)return this.setParams(b);else if(this[0].nodeName.toLowerCase()=="form"&&this[0].elements)return jQuery(jQuery.makeArray(this[0].elements)).getParams(d);return jQuery("input[name], textarea[name], select[name]",this[0]).getParams(d)},setParams:function(b){this.find("[name]").each(function(){var d=
b[g(this).attr("name")],a;if(d!==undefined){a=g(this);if(a.is(":radio"))a.val()==d&&a.attr("checked",true);else if(a.is(":checkbox")){d=g.isArray(d)?d:[d];g.inArray(a.val(),d)>-1&&a.attr("checked",true)}else a.val(d)}})},getParams:function(b){var d={},a;b=b===undefined?false:b;this.each(function(){var e=this;if(!((e.type&&e.type.toLowerCase())=="submit"||!e.name)){var c=e.name,f=g.data(e,"value")||g.fn.val.call([e]),h=i.test(e.type);c=c.match(j);e=!h||!!e.checked;if(b){if(l(f))f=parseFloat(f);else if(f===
"true")f=true;else if(f==="false")f=false;if(f==="")f=undefined}a=d;for(h=0;h<c.length-1;h++){a[c[h]]||(a[c[h]]={});a=a[c[h]]}c=c[c.length-1];if(a[c]){g.isArray(a[c])||(a[c]=a[c]===undefined?[]:[a[c]]);e&&a[c].push(f)}else if(e||!a[c])a[c]=e?f:undefined}});return d}})})(jQuery);
(function(){var k=$.isArray,h=function(a){return typeof a==="object"&&a!==null&&a},l=$.makeArray,o=$.each,q=function(a,c,b){if(a instanceof $.Observe)p([a],b._namespace);else a=k(a)?new $.Observe.List(a):new $.Observe(a);a.bind("change"+b._namespace,function(d){var e=$.makeArray(arguments);d=e.shift();e[0]=c==="*"?b.indexOf(a)+"."+e[0]:c+"."+e[0];$.event.trigger(d,e,b)});return a},p=function(a,c){for(var b,d=0;d<a.length;d++)(b=a[d])&&b.unbind&&b.unbind("change"+c)},s=0,j=null,t=function(){if(!j){j=
[];return true}},g=function(a,c,b){if(!a._init)if(j)j.push({t:a,ev:c,args:b});else return $.event.trigger(c,b,a,true)},u=0,v=function(){var a=j.length,c=j.slice(0),b;j=null;u++;for(var d=0;d<a;d++){b=c[d];$.event.trigger({type:b.ev,batchNum:u},b.args,b.t)}},m=function(a,c,b){a.each(function(d,e){b[d]=h(e)&&typeof e[c]=="function"?e[c]():e});return b};$.Class("jQuery.Observe",{init:function(a){this._data={};this._namespace=".observe"+ ++s;this._init=true;this.attrs(a);delete this._init},attr:function(a,
c){if(c===undefined)return this._get(a);else{this._set(a,c);return this}},each:function(){return o.apply(null,[this.__get()].concat(l(arguments)))},removeAttr:function(a){a=k(a)?a:a.split(".");var c=a.shift(),b=this._data[c];if(a.length)return b.removeAttr(a);else{delete this._data[c];g(this,"change",[c,"remove",undefined,b]);return b}},_get:function(a){a=k(a)?a:(""+a).split(".");var c=this.__get(a.shift());return a.length?c?c._get(a):undefined:c},__get:function(a){return a?this._data[a]:this._data},
_set:function(a,c){var b=k(a)?a:(""+a).split(".");a=b.shift();var d=this.__get(a);if(h(d)&&b.length)d._set(b,c);else if(b.length)throw"jQuery.Observe: set a property on an object that does not exist";else if(c!==d){b=this.__get().hasOwnProperty(a)?"set":"add";this.__set(a,h(c)?q(c,a,this):c);g(this,"change",[a,b,c,d]);d&&p([d],this._namespace)}},__set:function(a,c){this._data[a]=c;a in this.constructor.prototype||(this[a]=c)},bind:function(){$.fn.bind.apply($([this]),arguments);return this},unbind:function(){$.fn.unbind.apply($([this]),
arguments);return this},serialize:function(){return m(this,"serialize",{})},attrs:function(a,c){if(a===undefined)return m(this,"attrs",{});a=$.extend(true,{},a);var b,d=t();for(b in this._data){var e=this._data[b],f=a[b];if(f===undefined)c&&this.removeAttr(b);else{if(h(e)&&h(f))e.attrs(f,c);else e!=f&&this._set(b,f);delete a[b]}}for(b in a){f=a[b];this._set(b,f)}d&&v()}});var r=jQuery.Observe("jQuery.Observe.List",{init:function(a,c){this.length=0;this._namespace=".list"+ ++s;this._init=true;this.bind("change",
this.proxy("_changes"));this.push.apply(this,l(a||[]));$.extend(this,c);this.comparator&&this.sort();delete this._init},_changes:function(a,c,b,d,e){if(this.comparator&&/^\d+./.test(c)){var f=+/^\d+/.exec(c)[0],i=this[f],n=this.sortedIndex(i);if(n!==f){[].splice.call(this,f,1);[].splice.call(this,n,0,i);g(this,"move",[i,n,f]);a.stopImmediatePropagation();g(this,"change",[c.replace(/^\d+/,n),b,d,e]);return}}if(c.indexOf(".")===-1)if(b==="add")g(this,b,[d,+c]);else b==="remove"&&g(this,b,[e,+c])},sortedIndex:function(a){var c=
a.attr(this.comparator),b=0,d;for(d=0;d<this.length;d++)if(a===this[d])b=-1;else if(c<=this[d].attr(this.comparator))return d+b;return d+b},__get:function(a){return a?this[a]:this},__set:function(a,c){this[a]=c},serialize:function(){return m(this,"serialize",[])},splice:function(a,c){var b=l(arguments),d;for(d=2;d<b.length;d++){var e=b[d];if(h(e))b[d]=q(e,"*",this)}if(c===undefined)c=b[1]=this.length-a;d=[].splice.apply(this,b);if(c>0){g(this,"change",[""+a,"remove",undefined,d]);p(d,this._namespace)}b.length>
2&&g(this,"change",[""+a,"add",b.slice(2),d]);return d},attrs:function(a,c){if(a===undefined)return m(this,"attrs",[]);a=a.slice(0);for(var b=Math.min(a.length,this.length),d=t(),e=0;e<b;e++){var f=this[e],i=a[e];if(h(f)&&h(i))f.attrs(i,c);else f!=i&&this._set(e,i)}if(a.length>this.length)this.push(a.slice(this.length));else a.length<this.length&&c&&this.splice(a.length);d&&v()},sort:function(a,c){var b=this.comparator;[].sort.apply(this,b?[function(d,e){d=d[b];e=e[b];return d===e?0:d<e?-1:1}]:[]);
!c&&g(this,"reset")}}),w=function(a){return a[0]&&$.isArray(a[0])?a[0]:l(a)};o({push:"length",unshift:0},function(a,c){r.prototype[a]=function(){for(var b=w(arguments),d=c?this.length:0,e=0;e<b.length;e++){var f=b[e];if(h(f))b[e]=q(f,"*",this)}if(b.length==1&&this.comparator){this.splice(this.sortedIndex(b[0]),0,b[0]);return this.length}e=[][a].apply(this,b);if(this.comparator&&b.length>1){this.sort(null,true);g(this,"reset",[b])}else g(this,"change",[""+d,"add",b,undefined]);return e}});o({pop:"length",
shift:0},function(a,c){r.prototype[a]=function(){var b=w(arguments),d=c&&this.length?this.length-1:0;b=[][a].apply(this,b);g(this,"change",[""+d,"remove",undefined,[b]]);b&&b.unbind&&b.unbind("change"+this._namespace);return b}});r.prototype.indexOf=[].indexOf||function(a){return $.inArray(a,this)};$.O=function(a,c){return k(a)||a instanceof $.Observe.List?new $.Observe.List(a,c):new $.Observe(a,c)}})(jQuery);
(function(f){var k=/^\d+$/,l=/([^\[\]]+)|(\[\])/g,i=/\+/g,m=/([^?#]*)(#.*)?$/;f.String=f.extend(f.String||{},{deparam:function(d){if(!d||!m.test(d))return{};var j={};d=d.split("&");for(var c,g=0;g<d.length;g++){c=j;var a=d[g].split("=");if(a.length!=2)a=[a[0],a.slice(1).join("=")];var b=decodeURIComponent(a[0].replace(i," "));a=decodeURIComponent(a[1].replace(i," "));b=b.match(l);for(var e=0;e<b.length-1;e++){var h=b[e];c[h]||(c[h]=k.test(b[e+1])||b[e+1]=="[]"?[]:{});c=c[h]}lastPart=b[b.length-1];
if(lastPart=="[]")c.push(a);else c[lastPart]=a}return j}})})(jQuery);
(function(b){var o=/\:([\w\.]+)/g,p=/^(?:&[^=]+=[^&]*)+/,t=function(a){var c=[];j(a,function(d,e){if(d==="className")d="class";e&&c.push(q(d),'="',q(e),'" ')});return c.join("")},q=function(a){return a.replace(/"/g,"&#34;").replace(/'/g,"&#39;")},u=function(a,c){for(var d=0,e=0;e<a.names.length;e++){if(!c.hasOwnProperty(a.names[e]))return-1;d++}return d},r=true,k=window.location,v=encodeURIComponent,w=decodeURIComponent,j=b.each,l=b.extend;b.route=function(a,c){var d=[],e=a.replace(o,function(f,h){d.push(h);
return"([^\\/\\&]*)"});b.route.routes[a]={test:new RegExp("^"+e+"($|&)"),route:a,names:d,defaults:c||{},length:a.split("/").length};return b.route};l(b.route,{param:function(a){var c,d=0,e,f=a.route;delete a.route;f&&(c=b.route.routes[f])||j(b.route.routes,function(m,i){e=u(i,a);if(e>d){c=i;d=e}});if(c){var h=l({},a);f=c.route.replace(o,function(m,i){delete h[i];return a[i]===c.defaults[i]?"":v(a[i])});var g;j(c.defaults,function(m,i){h[m]===i&&delete h[m]});g=b.param(h);return f+(g?"&"+g:"")}return b.isEmptyObject(a)?
"":"&"+b.param(a)},deparam:function(a){var c={length:-1};j(b.route.routes,function(h,g){if(g.test.test(a)&&g.length>c.length)c=g});if(c.length>-1){var d=a.match(c.test),e=d.shift(),f=(e=a.substr(e.length-(d[d.length-1]==="&"?1:0)))&&p.test(e)?b.String.deparam(e.slice(1)):{};f=l(true,{},c.defaults,f);j(d,function(h,g){if(g&&g!=="&")f[c.names[h]]=w(g)});f.route=c.route;return f}if(a.charAt(0)!=="&")a="&"+a;return p.test(a)?b.String.deparam(a.slice(1)):{}},data:new b.Observe({}),routes:{},ready:function(a){if(a===
false)r=false;if(a===true||r===true)s();return b.route},url:function(a,c){return c?"#!"+b.route.param(l({},n,a)):"#!"+b.route.param(a)},link:function(a,c,d,e){return"<a "+t(l({href:b.route.url(c,e)},d))+">"+a+"</a>"},current:function(a){return k.hash=="#!"+b.route.param(a)}});b(function(){b.route.ready()});j(["bind","unbind","delegate","undelegate","attr","attrs","serialize","removeAttr"],function(a,c){b.route[c]=function(){return b.route.data[c].apply(b.route.data,arguments)}});var n,s=function(){var a=
k.hash.substr(1,1)==="!"?k.hash.slice(2):k.hash.slice(1);n=b.route.deparam(a);b.route.attrs(n,true)};b(window).bind("hashchange",s);b.route.bind("change",function(a){var c;return function(){var d=arguments,e=this;clearTimeout(c);c=setTimeout(function(){a.apply(e,d)},1)}}(function(){k.hash="#!"+b.route.param(b.route.serialize())}))})(jQuery);
(function(e){e.fn.range=function(){return e.Range(this[0])};var p=function(a){return a.replace(/([a-z])([a-z]+)/gi,function(b,d,c){return d+c.toLowerCase()}).replace(/_/g,"")},s=function(a){return a.replace(/^([a-z]+)_TO_([a-z]+)/i,function(b,d,c){return c+"_TO_"+d})},q=function(a){return a?a.ownerDocument.defaultView||a.ownerDocument.parentWindow:window},r={};e.Range=function(a){if(this.constructor!==e.Range)return new e.Range(a);if(a&&a.jquery)a=a[0];if(!a||a.nodeType){this.win=q(a);this.range=
this.win.document.createRange?this.win.document.createRange():this.win.document.body.createTextRange();a&&this.select(a)}else if(a.clientX!=null||a.pageX!=null||a.left!=null)this.moveToPoint(a);else if(a.originalEvent&&a.originalEvent.touches&&a.originalEvent.touches.length)this.moveToPoint(a.originalEvent.touches[0]);else if(a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)this.moveToPoint(a.originalEvent.changedTouches[0]);else this.range=a};e.Range.current=
function(a){a=q(a);var b;if(a.getSelection){b=a.getSelection();return new e.Range(b.rangeCount?b.getRangeAt(0):a.document.createRange())}else return new e.Range(a.document.selection.createRange())};e.extend(e.Range.prototype,{moveToPoint:function(a){var b=a.clientX,d=a.clientY;if(!b){d=o();b=(a.pageX||a.left||0)-d.left;d=(a.pageY||a.top||0)-d.top}if(r.moveToPoint){this.range=e.Range().range;this.range.moveToPoint(b,d);return this}for(var c=document.elementFromPoint(b,d),f=0;f<c.childNodes.length;f++){var h=
c.childNodes[f];if(h.nodeType===3||h.nodeType===4){h=e.Range(h);for(var j=h.toString().length,g=1;g<j+1;g++){var i=h.end(g).rect();if(i.left<=b&&i.left+i.width>=b&&i.top<=d&&i.top+i.height>=d){h.start(g-1);this.range=h.range;return}}}}var k;l(c.childNodes,function(m){m=e.Range(m);if(m.rect().top>a.clientY)return false;else k=m});if(k){k.start(k.toString().length);this.range=k.range}else this.range=e.Range(c).range},window:function(){return this.win||window},overlaps:function(a){if(a.nodeType)a=e.Range(a).select(a);
var b=this.compare("START_TO_START",a),d=this.compare("END_TO_END",a);if(b<=0&&d>=0)return true;if(b>=0&&this.compare("START_TO_END",a)<=0)return true;if(this.compare("END_TO_START",a)>=0&&d<=0)return true;return false},collapse:function(a){this.range.collapse(a===undefined?true:a);return this},toString:function(){return typeof this.range.text=="string"?this.range.text:this.range.toString()},start:function(a){if(a===undefined)if(this.range.startContainer)return{container:this.range.startContainer,
offset:this.range.startOffset};else{a=this.clone().collapse().parent();var b=e.Range(a).select(a).collapse();b.move("END_TO_START",this);return{container:a,offset:b.toString().length}}else{if(this.range.setStart)if(typeof a=="number")this.range.setStart(this.range.startContainer,a);else typeof a=="string"?this.range.setStart(this.range.startContainer,this.range.startOffset+parseInt(a,10)):this.range.setStart(a.container,a.offset);else throw"todo";return this}},end:function(a){if(a===undefined)if(this.range.startContainer)return{container:this.range.endContainer,
offset:this.range.endOffset};else{a=this.clone().collapse(false).parent();var b=e.Range(a).select(a).collapse();b.move("END_TO_END",this);return{container:a,offset:b.toString().length}}else{if(this.range.setEnd)typeof a=="number"?this.range.setEnd(this.range.endContainer,a):this.range.setEnd(a.container,a.offset);else throw"todo";return this}},parent:function(){if(this.range.commonAncestorContainer)return this.range.commonAncestorContainer;else{var a=this.range.parentElement(),b=this.range;l(a.childNodes,
function(d){if(e.Range(d).range.inRange(b)){a=d;return false}});return a}},rect:function(a){var b=this.range.getBoundingClientRect();if(a==="page"){a=o();b=e.extend({},b);b.top+=a.top;b.left+=a.left}return b},rects:function(a){for(var b=e.makeArray(this.range.getClientRects()).sort(function(g,i){return i.width*i.height-g.width*g.height}),d=0,c;d<b.length;){var f=b[d],h=false;c=d+1;for(c=d+1;c<b.length;c++)if(t(f,b[c])){h=b[c];break}if(h)b.splice(d,1);else d++}if(a=="page"){var j=o();return e.map(b,
function(g){g=e.extend({},g);g.top+=j.top;g.left+=j.left;return g})}return b}});(function(){var a=e.Range.prototype,b=e.Range().range;a.compare=b.compareBoundaryPoints?function(c,f){return this.range.compareBoundaryPoints(this.window().Range[s(c)],f.range)}:function(c,f){return this.range.compareEndPoints(p(c),f.range)};a.move=b.setStart?function(c,f){f=f.range;switch(c){case "START_TO_END":this.range.setStart(f.endContainer,f.endOffset);break;case "START_TO_START":this.range.setStart(f.startContainer,
f.startOffset);break;case "END_TO_END":this.range.setEnd(f.endContainer,f.endOffset);break;case "END_TO_START":this.range.setEnd(f.startContainer,f.startOffset);break}return this}:function(c,f){this.range.setEndPoint(p(c),f.range);return this};var d=b.cloneRange?"cloneRange":"duplicate";a.clone=function(){return e.Range(this.range[d]())};a.select=b.selectNodeContents?function(c){c?this.range.selectNodeContents(c):this.window().getSelection().addRange(this.range);return this}:function(c){if(c)if(c.nodeType===
3){var f=c.parentNode,h=0,j;l(f.childNodes,function(g){if(g===c){j=h+g.nodeValue.length;return false}else h+=g.nodeValue.length});this.range.moveToElementText(f);this.range.moveEnd("character",j-this.range.text.length);this.range.moveStart("character",h)}else this.range.moveToElementText(c);else this.range.select();return this}})();var l=function(a,b){for(var d,c=0;a[c];c++){d=a[c];if(d.nodeType===3||d.nodeType===4){if(b(d)===false)return false}else if(d.nodeType!==8)if(l(d.childNodes,b)===false)return false}},
n=function(a,b){return a.left<=b.clientX&&a.left+a.width>=b.clientX&&a.top<=b.clientY&&a.top+a.height>=b.clientY},t=function(a,b){return n(a,{clientX:b.left,clientY:b.top})&&n(a,{clientX:b.left+b.width,clientY:b.top})&&n(a,{clientX:b.left,clientY:b.top+b.height})&&n(a,{clientX:b.left+b.width,clientY:b.top+b.height})},o=function(a){a=a||window;doc=a.document.documentElement;body=a.document.body;return{left:(doc&&doc.scrollLeft||body&&body.scrollLeft||0)+(doc.clientLeft||0),top:(doc&&doc.scrollTop||
body&&body.scrollTop||0)+(doc.clientTop||0)}};r.moveToPoint=!!e.Range().range.moveToPoint})(jQuery);
